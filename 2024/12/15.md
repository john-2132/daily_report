## 取り組んだ課題一覧

- Everyday Rails

## わかったこと

* バックグラウンドワーカーのテスト
  * `queue_adapter`に`:test`を指定する必要がある 
  * ジョブがキューに追加されているかを確認するには、いくつか`rspec-rails`で提供されている
  * `have_enqueued_job`と`enqueue_job`メソッドでは、ブロック形式のエクスペクテーションが必要
* メール送信のテスト
  * メールの内容が正しく構築されているか
  * 正しい送信者から正しい宛先に送信されているか 
  * たいていはバックグラウンドプロセスで行われるので、`perform_enqueued_jobs`ブロックで囲む必要がある
  * `ActionMailer::Base.deliveries`にアクセスすることで、最後の値を取得できる
* Webサービスをテスト
  * 外部サービスを使用するのは実行速度の低下をもたらす
  * 場合によっては、レートリミットや、有料サービスであれば料金が発生してしまう
  * `VCR`gemを使用することで、リクエストを毎回投げることなく、記録されたリクエスト、レスポンスを返してくれる
  * `VCR`が水面下で`WebMock`gemを使用しているため、Gemfileへ記述する必要がある

## 次やること

- Everyday Rails

## 感じたこと

- テスト技法の知識なしにこれらのテストケースを出していくと、無駄なテストが増えて膨らんでしまうのは想像に固くないなと感じた。
 
## 学習時間

Today:3h
Total:982h
